"use strict";(self.webpackChunkdisenos_agarcia_frontend=self.webpackChunkdisenos_agarcia_frontend||[]).push([[860],{4860:(M,c,i)=>{i.r(c),i.d(c,{LoginComponent:()=>_});var m=i(177),a=i(4341),l=i(6544),n=i(4438),u=i(4796);function b(t,f){1&t&&n.nrm(0,"span",30)}function p(t,f){if(1&t&&(n.j41(0,"div",31),n.EFF(1),n.k0s()),2&t){const o=n.XpG();n.R7$(),n.SpI(" ",o.errorMessage," ")}}function h(t,f){if(1&t&&(n.j41(0,"div",32),n.EFF(1),n.k0s()),2&t){const o=n.XpG();n.R7$(),n.SpI(" ",o.infoMessage," ")}}let _=(()=>{class t{constructor(o,r){this.authService=o,this.router=r,this.loginData={usuarioCorreo:"",contrasena:""},this.showPassword=!1,this.isLoading=!1,this.errorMessage="",this.infoMessage=""}ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/"]),this.handleUrlParameters()}togglePassword(){this.showPassword=!this.showPassword}onLogin(){this.loginData.usuarioCorreo.trim()&&this.loginData.contrasena.trim()?(this.isLoading=!0,this.errorMessage="",this.infoMessage="",this.authService.login({usuarioCorreo:this.loginData.usuarioCorreo,contrasena:this.loginData.contrasena}).subscribe({next:o=>{this.isLoading=!1,"success"===o.status?(this.infoMessage="Inicio de sesi\xf3n exitoso. Redirigiendo...",setTimeout(()=>{this.router.navigate(["/"])},1e3)):this.errorMessage=o.message||"Error al iniciar sesi\xf3n"},error:o=>{this.isLoading=!1,console.error("Error en login:",o),this.errorMessage=401===o.status?"Credenciales incorrectas. Verifica tu usuario y contrase\xf1a.":404===o.status?"Usuario no registrado. \xbfDeseas crear una cuenta?":"Error al conectar con el servidor. Int\xe9ntalo de nuevo."}})):this.errorMessage="Por favor, completa todos los campos."}goToRegister(){this.router.navigate(["/register"])}handleUrlParameters(){const r=new URLSearchParams(window.location.search).get("message");"CI"===r?this.errorMessage="Las credenciales proporcionadas son incorrectas.":"NR"===r?this.errorMessage="El usuario no est\xe1 registrado en el sistema.":"logout"===r?this.infoMessage="Has cerrado sesi\xf3n correctamente.":"registered"===r&&(this.infoMessage="Registro exitoso. Ya puedes iniciar sesi\xf3n.")}static{this.\u0275fac=function(r){return new(r||t)(n.rXU(u.u),n.rXU(l.Ix))}}static{this.\u0275cmp=n.VBU({type:t,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:51,vars:10,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-card"],["src","assets/img/horizontal-logo.png","alt","Logo"],[3,"ngSubmit"],[1,"mb-3"],["type","text","name","usuario_correo","placeholder","Correo Electr\xf3nico o Nombre de usuario","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"mb-3","position-relative"],["name","contrasena","placeholder","Contrase\xf1a","required","",1,"form-control",3,"ngModelChange","type","ngModel"],[1,"position-absolute","top-50","end-0","translate-middle-y","pe-3",2,"cursor","pointer",3,"click"],["type","submit",1,"btn","btn-success","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/forgot-password",1,"register-link"],[1,"mt-3"],["routerLink","/register",1,"register-link"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["class","alert alert-info mt-3","role","alert",4,"ngIf"],["id","contraMal","tabindex","-1","aria-labelledby","contraMalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","contraMalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","noRegistrado","tabindex","-1","aria-labelledby","noRegistradoLabel","aria-hidden","true",1,"modal","fade"],["id","noRegistradoLabel",1,"modal-title"],["type","button",1,"btn","btn-success",3,"click"],[1,"spinner-border","spinner-border-sm","me-2"],["role","alert",1,"alert","alert-danger","mt-3"],["role","alert",1,"alert","alert-info","mt-3"]],template:function(r,e){if(1&r){const d=n.RV6();n.j41(0,"div",1)(1,"div",2),n.nrm(2,"img",3),n.j41(3,"h2"),n.EFF(4,"Iniciar Sesi\xf3n"),n.k0s(),n.j41(5,"form",4,0),n.bIt("ngSubmit",function(){return n.eBV(d),n.Njj(e.onLogin())}),n.j41(7,"div",5)(8,"input",6),n.mxI("ngModelChange",function(s){return n.eBV(d),n.DH7(e.loginData.usuarioCorreo,s)||(e.loginData.usuarioCorreo=s),n.Njj(s)}),n.k0s()(),n.j41(9,"div",7)(10,"input",8),n.mxI("ngModelChange",function(s){return n.eBV(d),n.DH7(e.loginData.contrasena,s)||(e.loginData.contrasena=s),n.Njj(s)}),n.k0s(),n.j41(11,"i",9),n.bIt("click",function(){return n.eBV(d),n.Njj(e.togglePassword())}),n.k0s()(),n.j41(12,"button",10),n.DNE(13,b,1,0,"span",11),n.EFF(14),n.k0s(),n.j41(15,"div",12)(16,"a",13),n.EFF(17,"\xbfOlvidaste tu contrase\xf1a?"),n.k0s()(),n.j41(18,"div",14)(19,"p"),n.EFF(20,"\xbfNo tienes una cuenta? "),n.j41(21,"a",15),n.EFF(22,"Reg\xedstrate"),n.k0s()()()(),n.DNE(23,p,2,1,"div",16)(24,h,2,1,"div",17),n.k0s()(),n.j41(25,"div",18)(26,"div",19)(27,"div",20)(28,"div",21)(29,"h5",22),n.EFF(30,"Error de autenticaci\xf3n"),n.k0s(),n.nrm(31,"button",23),n.k0s(),n.j41(32,"div",24),n.EFF(33," Las credenciales proporcionadas son incorrectas. Por favor, verifica tu usuario y contrase\xf1a. "),n.k0s(),n.j41(34,"div",25)(35,"button",26),n.EFF(36,"Cerrar"),n.k0s()()()()(),n.j41(37,"div",27)(38,"div",19)(39,"div",20)(40,"div",21)(41,"h5",28),n.EFF(42,"Usuario no registrado"),n.k0s(),n.nrm(43,"button",23),n.k0s(),n.j41(44,"div",24),n.EFF(45," El usuario no est\xe1 registrado en el sistema. \xbfDeseas crear una cuenta nueva? "),n.k0s(),n.j41(46,"div",25)(47,"button",26),n.EFF(48,"Cerrar"),n.k0s(),n.j41(49,"button",29),n.bIt("click",function(){return n.eBV(d),n.Njj(e.goToRegister())}),n.EFF(50,"Registrarse"),n.k0s()()()()()}2&r&&(n.R7$(8),n.R50("ngModel",e.loginData.usuarioCorreo),n.R7$(2),n.Y8G("type",e.showPassword?"text":"password"),n.R50("ngModel",e.loginData.contrasena),n.R7$(),n.HbH(e.showPassword?"fa fa-eye-slash":"fa fa-eye"),n.R7$(),n.Y8G("disabled",e.isLoading),n.R7$(),n.Y8G("ngIf",e.isLoading),n.R7$(),n.SpI(" ",e.isLoading?"Iniciando...":"Iniciar Sesi\xf3n"," "),n.R7$(9),n.Y8G("ngIf",e.errorMessage),n.R7$(),n.Y8G("ngIf",e.infoMessage))},dependencies:[m.MD,m.bT,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV,l.iI,l.Wk],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#f5f5f5,#e9ecef);padding:2rem 1rem}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 8px #0003;max-width:430px;width:100%;text-align:center;position:relative;transition:transform .3s ease}.login-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.login-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;margin-bottom:1rem;filter:drop-shadow(0 2px 8px rgba(0,0,0,.1))}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#875d19;margin-bottom:1rem;font-family:Roboto,sans-serif;font-size:24px;font-weight:400;position:relative}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:60px;height:3px;background:linear-gradient(90deg,#b38449,#875d19);border-radius:2px}.form-control[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:8px;padding:.75rem 1rem;font-size:16px;font-family:Roboto,sans-serif;font-weight:300;transition:all .3s ease;background-color:#fafafa}.form-control[_ngcontent-%COMP%]:focus{border-color:#b38449;box-shadow:0 0 0 .2rem #b3844940;background-color:#fff;outline:none}.form-control[_ngcontent-%COMP%]::placeholder{color:#6c757d;font-weight:300}.position-relative[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#6c757d;transition:color .3s ease;z-index:10}.position-relative[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]:hover{color:#b38449}.btn-success[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b38449,#875d19);border:none;border-radius:8px;padding:.875rem 1.5rem;font-size:16px;font-weight:500;font-family:Roboto,sans-serif;transition:all .3s ease;position:relative;overflow:hidden}.btn-success[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#875d19,#6b4914);transform:translateY(-2px);box-shadow:0 6px 20px #b3844966}.btn-success[_ngcontent-%COMP%]:active, .btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-success[_ngcontent-%COMP%]:disabled, .btn-primary[_ngcontent-%COMP%]:disabled{background:#6c757d;cursor:not-allowed;transform:none;box-shadow:none}.btn-primary[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-primary[_ngcontent-%COMP%]:hover:before{left:100%}.register-link[_ngcontent-%COMP%]{color:#b38449;text-decoration:none;font-weight:400;transition:all .3s ease;position:relative}.register-link[_ngcontent-%COMP%]:hover{color:#875d19;text-decoration:none}.register-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:0;height:2px;background:linear-gradient(90deg,#b38449,#875d19);transition:width .3s ease}.register-link[_ngcontent-%COMP%]:hover:after{width:100%}.login-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:14px;margin-bottom:0;font-family:Roboto,sans-serif;font-weight:300}.alert[_ngcontent-%COMP%]{border-radius:8px;border:none;font-size:14px;font-family:Roboto,sans-serif;animation:_ngcontent-%COMP%_slideDown .3s ease}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.alert-info[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid #b38449;background:linear-gradient(135deg,#b38449,#875d19);color:#fff}.modal-title[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:400}.modal-body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:300;line-height:1.6}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b38449,#875d19);border:none}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.login-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:1rem;min-height:100vh}.login-card[_ngcontent-%COMP%]{padding:2rem 1.5rem;margin:1rem 0}.login-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.form-control[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:1.5rem 1rem}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;margin-bottom:1.5rem}.login-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-bottom:1rem}}.form-control[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:focus, .register-link[_ngcontent-%COMP%]:focus{outline:2px solid #b38449;outline-offset:2px}.login-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#b38449,#875d19);border-radius:12px 12px 0 0}.mb-3[_ngcontent-%COMP%]{transition:transform .2s ease}.form-control[_ngcontent-%COMP%]:focus + .mb-3[_ngcontent-%COMP%]{transform:translateY(-2px)}']})}}return t})()}}]);