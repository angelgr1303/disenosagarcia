"use strict";(self.webpackChunkdisenos_agarcia_frontend=self.webpackChunkdisenos_agarcia_frontend||[]).push([[329],{1329:($,l,c)=>{c.r(l),c.d(l,{ProductDetailComponent:()=>R});var s=c(177),d=c(6544),t=c(4438),u=c(6241),g=c(4796),p=c(6868),_=c(7326),m=c(2499);function f(e,n){if(1&e&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&e){const o=t.XpG(2);t.R7$(),t.JRh(o.product.description)}}function h(e,n){1&e&&(t.j41(0,"div")(1,"a",15),t.EFF(2," Iniciar sesi\xf3n para comprar "),t.k0s()())}function v(e,n){if(1&e){const o=t.RV6();t.j41(0,"div",16)(1,"button",17),t.bIt("click",function(){t.eBV(o);const i=t.XpG(2);return t.Njj(i.toggleFavorite())}),t.nrm(2,"i"),t.EFF(3),t.k0s(),t.j41(4,"button",17),t.bIt("click",function(){t.eBV(o);const i=t.XpG(2);return t.Njj(i.toggleCart())}),t.nrm(5,"i"),t.EFF(6),t.k0s()()}if(2&e){const o=t.XpG(2);t.R7$(),t.Y8G("disabled",o.loadingFavorite),t.R7$(),t.HbH(o.getFavoriteIconClass()),t.R7$(),t.SpI(" ",o.getFavoriteButtonText()," "),t.R7$(),t.Y8G("disabled",o.loadingCart),t.R7$(),t.HbH(o.getCartIconClass()),t.R7$(),t.SpI(" ",o.getCartButtonText()," ")}}function C(e,n){if(1&e&&(t.j41(0,"li")(1,"strong"),t.EFF(2,"Subcategor\xeda:"),t.k0s(),t.EFF(3),t.k0s()),2&e){const o=t.XpG(3);t.R7$(3),t.SpI(" ",o.product.subcategory,"")}}function P(e,n){if(1&e&&(t.j41(0,"li")(1,"strong"),t.EFF(2,"Archivo CorelDraw:"),t.k0s(),t.EFF(3),t.k0s()),2&e){const o=t.XpG(3);t.R7$(3),t.SpI(" ",o.product.corelFile,"")}}function b(e,n){if(1&e&&(t.j41(0,"div",18)(1,"div",19)(2,"ul",20)(3,"li")(4,"strong"),t.EFF(5,"ID del producto:"),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"li")(8,"strong"),t.EFF(9,"Categor\xeda:"),t.k0s(),t.EFF(10),t.k0s(),t.DNE(11,C,4,1,"li",11)(12,P,4,1,"li",11),t.k0s()()()),2&e){const o=t.XpG(2);t.R7$(6),t.SpI(" ",o.product.id,""),t.R7$(4),t.SpI(" ",o.product.category,""),t.R7$(),t.Y8G("ngIf",o.product.subcategory),t.R7$(),t.Y8G("ngIf",o.product.corelFile)}}function x(e,n){if(1&e&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),t.nrm(4,"img",5),t.k0s()(),t.j41(5,"div",3)(6,"div")(7,"h1",6),t.EFF(8),t.k0s(),t.j41(9,"h3"),t.EFF(10,"Categor\xeda del dise\xf1o: "),t.j41(11,"p",7),t.EFF(12),t.k0s()(),t.j41(13,"h3",8),t.EFF(14),t.k0s(),t.DNE(15,f,2,1,"p",9),t.j41(16,"div",10),t.DNE(17,h,3,0,"div",11)(18,v,7,8,"div",12),t.k0s()()()(),t.DNE(19,b,13,4,"div",13),t.k0s()),2&e){const o=t.XpG();t.R7$(4),t.Y8G("src",o.getProductImagePath(o.product),t.B4B)("alt",o.product.name),t.R7$(4),t.JRh(o.product.name),t.R7$(4),t.JRh(o.getCategoryDisplayName()),t.R7$(2),t.SpI("",o.product.price,"\u20ac"),t.R7$(),t.Y8G("ngIf",o.product.description),t.R7$(2),t.Y8G("ngIf",!o.isAuthenticated),t.R7$(),t.Y8G("ngIf",o.isAuthenticated),t.R7$(),t.Y8G("ngIf",o.product.description)}}function O(e,n){if(1&e){const o=t.RV6();t.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"img",32),t.bIt("click",function(){const i=t.eBV(o).$implicit,a=t.XpG(3);return t.Njj(a.goToProduct(i.id))}),t.k0s(),t.j41(4,"div",33)(5,"p",34),t.EFF(6),t.k0s(),t.j41(7,"p",35),t.EFF(8),t.k0s(),t.j41(9,"div",36)(10,"button",37),t.bIt("click",function(){const i=t.eBV(o).$implicit,a=t.XpG(3);return t.Njj(a.goToProduct(i.id))}),t.EFF(11," Ver producto "),t.k0s()()()()()()}if(2&e){const o=n.$implicit,r=t.XpG(3);t.R7$(3),t.Y8G("src",r.getProductImagePath(o),t.B4B)("alt",o.name),t.R7$(3),t.SpI("",o.price,"\u20ac"),t.R7$(2),t.JRh(o.name)}}function M(e,n){if(1&e&&(t.j41(0,"div",27)(1,"div",2),t.DNE(2,O,12,4,"div",28),t.k0s()()),2&e){const o=n.$implicit;t.AVh("active",n.first),t.R7$(2),t.Y8G("ngForOf",o)}}function F(e,n){1&e&&(t.j41(0,"a",38),t.nrm(1,"i",39),t.k0s())}function E(e,n){1&e&&(t.j41(0,"a",40),t.nrm(1,"i",41),t.k0s())}function k(e,n){if(1&e&&(t.j41(0,"div",1)(1,"h4",21),t.EFF(2,"Productos Relacionados"),t.k0s(),t.j41(3,"div",22)(4,"div",23),t.DNE(5,M,3,3,"div",24),t.k0s(),t.DNE(6,F,2,0,"a",25)(7,E,2,0,"a",26),t.k0s()()),2&e){const o=t.XpG();t.R7$(5),t.Y8G("ngForOf",o.getProductChunks()),t.R7$(),t.Y8G("ngIf",o.getProductChunks().length>1),t.R7$(),t.Y8G("ngIf",o.getProductChunks().length>1)}}function I(e,n){1&e&&(t.j41(0,"div",1)(1,"div",42)(2,"h4"),t.EFF(3,"Producto no encontrado"),t.k0s(),t.j41(4,"p"),t.EFF(5,"El producto que buscas no existe o ha sido eliminado."),t.k0s(),t.j41(6,"a",43),t.EFF(7,"Volver a la tienda"),t.k0s()()())}function D(e,n){1&e&&(t.j41(0,"div",1)(1,"div",44)(2,"h4"),t.EFF(3,"Cargando producto..."),t.k0s()()())}let R=(()=>{class e{constructor(o,r,i,a,w,y){this.route=o,this.productService=r,this.authService=i,this.cartService=a,this.favoriteService=w,this.imageService=y,this.product=null,this.relatedProducts=[],this.loading=!0,this.loadingFavorite=!1,this.loadingCart=!1,this.isFavorite=!1,this.isInCart=!1}ngOnInit(){this.route.params.subscribe(o=>{const r=o.id;r&&this.loadProduct(+r)})}loadProduct(o){this.loading=!0,this.productService.getProductById(o).subscribe({next:r=>{r&&(this.product=r,this.loadRelatedProducts(),this.checkFavoriteAndCartStatus()),this.loading=!1},error:r=>{console.error("Error al cargar producto:",r),this.loading=!1}})}loadRelatedProducts(){this.product&&this.productService.getProductsByCategory(this.product.category).subscribe({next:o=>{this.relatedProducts=o.filter(r=>r.id!==this.product.id).slice(0,6)},error:o=>{console.error("Error al cargar productos relacionados:",o)}})}checkFavoriteAndCartStatus(){this.isAuthenticated&&this.product&&(this.favoriteService.getFavorites().subscribe({next:o=>{"success"===o.status&&o.favoritos&&(this.isFavorite=o.favoritos.some(r=>r.idProducto===this.product.id))},error:o=>console.error("Error verificando favoritos:",o)}),this.cartService.getCart().subscribe({next:o=>{"success"===o.status&&o.carrito&&(this.isInCart=o.carrito.some(r=>r.idProducto===this.product.id))},error:o=>console.error("Error verificando carrito:",o)}))}toggleFavorite(){!this.product||this.loadingFavorite||(this.loadingFavorite=!0,this.favoriteService.toggleFavorite(this.product.id).subscribe({next:o=>{this.isFavorite="added"===o.status,this.loadingFavorite=!1,this.favoriteService.loadFavoritesCount()},error:o=>{console.error("Error al modificar favoritos:",o),this.loadingFavorite=!1}}))}toggleCart(){!this.product||this.loadingCart||(this.loadingCart=!0,this.isInCart?this.cartService.removeFromCart(this.product.id).subscribe({next:o=>{this.isInCart=!1,this.loadingCart=!1,this.cartService.loadCartCount()},error:o=>{console.error("Error al eliminar del carrito:",o),this.loadingCart=!1}}):this.cartService.addToCart(this.product.id).subscribe({next:o=>{this.isInCart=!0,this.loadingCart=!1,this.cartService.loadCartCount()},error:o=>{console.error("Error al a\xf1adir al carrito:",o),this.loadingCart=!1}}))}goToProduct(o){window.location.href=`/product/${o}`}getProductImagePath(o){return this.imageService.getProductImagePath({category:o.category,subcategory:o.subcategory,image:o.image})}getCategoryDisplayName(){if(!this.product)return"";let o=this.product.subcategory?`${this.product.category}/${this.product.subcategory}`:this.product.category;return o.charAt(0).toUpperCase()+o.slice(1)}getFavoriteIconClass(){return this.isFavorite?"fas fa-heart":"far fa-heart"}getFavoriteButtonText(){return this.isFavorite?"Eliminar de favoritos":"A\xf1adir a favoritos"}getCartIconClass(){return this.isInCart?"fas fa-trash":"fas fa-cart-plus"}getCartButtonText(){return this.isInCart?"Eliminar del carrito":"A\xf1adir al carrito"}getProductChunks(){const o=[];for(let r=0;r<this.relatedProducts.length;r+=3)o.push(this.relatedProducts.slice(r,r+3));return o}get isAuthenticated(){return this.authService.isAuthenticated()}static{this.\u0275fac=function(r){return new(r||e)(t.rXU(d.nX),t.rXU(u.b),t.rXU(g.u),t.rXU(p.m),t.rXU(_.U),t.rXU(m.f))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-product-detail"]],standalone:!0,features:[t.aNF],decls:4,vars:4,consts:[["class","container mt-5",4,"ngIf"],[1,"container","mt-5"],[1,"row"],[1,"col-md-6"],[1,"product-image-container","text-center","mb-4"],[1,"img-fluid","rounded","shadow-lg",3,"src","alt"],[1,"product-title","mb-3"],[1,"product-category"],[1,"product-price","precio"],["class","product-description mb-4",4,"ngIf"],[1,"d-flex","align-items-center","CambiarBotones"],[4,"ngIf"],["class","d-flex gap-3",4,"ngIf"],["class","row mt-5",4,"ngIf"],[1,"product-description","mb-4"],["routerLink","/login",1,"btn","btn-primary","btn-lg","me-3"],[1,"d-flex","gap-3"],[1,"btn","btn-success","btn-lg",3,"click","disabled"],[1,"row","mt-5"],[1,"col"],[1,"list-unstyled"],[1,"text-secondary"],["id","related-products-carousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["class","carousel-control-prev text-decoration-none w-auto ps-3","href","#related-products-carousel","role","button","data-bs-slide","prev",4,"ngIf"],["class","carousel-control-next text-decoration-none w-auto pe-3","href","#related-products-carousel","role","button","data-bs-slide","next",4,"ngIf"],[1,"carousel-item"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","h-100","product-wap"],[1,"card","rounded-0"],[1,"card-img-top","rounded-0","border",3,"click","src","alt"],[1,"card-body"],[1,"text-center","mb-0"],[1,"h5","text-center"],[1,"text-center","mt-2"],[1,"btn","btn-success","btn-sm",3,"click"],["href","#related-products-carousel","role","button","data-bs-slide","prev",1,"carousel-control-prev","text-decoration-none","w-auto","ps-3"],[1,"fas","fa-chevron-left"],["href","#related-products-carousel","role","button","data-bs-slide","next",1,"carousel-control-next","text-decoration-none","w-auto","pe-3"],[1,"fas","fa-chevron-right"],[1,"alert","alert-warning","text-center"],["routerLink","/shop",1,"btn","btn-primary"],[1,"text-center"]],template:function(r,i){1&r&&t.DNE(0,x,20,9,"div",0)(1,k,8,3,"div",0)(2,I,8,0,"div",0)(3,D,4,0,"div",0),2&r&&(t.Y8G("ngIf",i.product),t.R7$(),t.Y8G("ngIf",i.relatedProducts.length>0),t.R7$(),t.Y8G("ngIf",!i.product&&!i.loading),t.R7$(),t.Y8G("ngIf",i.loading))},dependencies:[s.MD,s.Sq,s.bT,d.iI,d.Wk],styles:[".container[_ngcontent-%COMP%]{padding:2rem 15px}.product-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:10px;box-shadow:0 10px 30px #00000026;transition:transform .3s ease}.product-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.product-title[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:2.5rem!important;font-weight:400;color:#333;margin-bottom:1rem}.product-category[_ngcontent-%COMP%]{display:inline;color:#b38449;font-weight:500;margin:0}.product-price[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:2rem!important;font-weight:600;color:#b38449;margin:1.5rem 0}.precio[_ngcontent-%COMP%]{background:linear-gradient(135deg,#b38449,#875d19);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.product-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#666;line-height:1.6;margin:1.5rem 0}.CambiarBotones[_ngcontent-%COMP%]{margin-top:2rem;gap:1rem}.btn-lg[_ngcontent-%COMP%]{padding:12px 24px;font-size:1.1rem;font-weight:500;border-radius:8px;transition:all .3s ease;min-width:200px}.btn-success[_ngcontent-%COMP%]{background-color:#b38449!important;border-color:#875d19!important;color:#fff}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#875d19!important;border-color:#875d19!important;transform:translateY(-2px);box-shadow:0 6px 20px #b3844966}.btn-primary[_ngcontent-%COMP%]{background-color:#b38449;border-color:#875d19;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3;transform:translateY(-2px);box-shadow:0 6px 20px #007bff66}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important;box-shadow:none!important}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.list-unstyled[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1.5rem;border-radius:8px;border-left:4px solid #b38449}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1rem;color:#555}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-weight:600}.text-secondary[_ngcontent-%COMP%]{color:#6c757d!important;font-weight:600;margin-bottom:2rem;border-bottom:2px solid #e9ecef;padding-bottom:.5rem}.product-wap[_ngcontent-%COMP%]{box-shadow:0 5px 15px #0000001a;transition:transform .3s ease,box-shadow .3s ease;border-radius:8px;overflow:hidden}.product-wap[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 15px 35px #0003}.product-wap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s ease;height:250px;object-fit:cover}.product-wap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.product-wap[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.product-wap[_ngcontent-%COMP%]   .h5[_ngcontent-%COMP%]{font-size:1.1rem!important;font-weight:500;margin:.75rem 0;color:#333}.product-wap[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{padding:8px 16px;font-size:.9rem;border-radius:6px}#related-products-carousel[_ngcontent-%COMP%]{margin-top:2rem}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#59ab6ee6;border-radius:50%;top:50%;transform:translateY(-50%)}.carousel-control-prev[_ngcontent-%COMP%]{left:-25px}.carousel-control-next[_ngcontent-%COMP%]{right:-25px}.carousel-control-prev[_ngcontent-%COMP%]:hover, .carousel-control-next[_ngcontent-%COMP%]:hover{background-color:#59ab6e}.carousel-control-prev[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff!important;font-size:1.2rem!important}.alert[_ngcontent-%COMP%]{border-radius:10px;border:none;padding:2rem;margin:3rem 0}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404;border-left:4px solid #ffc107}.alert[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#856404;font-weight:600;margin-bottom:1rem}.alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem}@media (max-width: 768px){.product-title[_ngcontent-%COMP%]{font-size:2rem!important}.product-price[_ngcontent-%COMP%]{font-size:1.5rem!important}.btn-lg[_ngcontent-%COMP%]{font-size:1rem;padding:10px 20px;min-width:160px}.CambiarBotones[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.CambiarBotones[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.product-wap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%]{width:40px;height:40px}.carousel-control-prev[_ngcontent-%COMP%]{left:-20px}.carousel-control-next[_ngcontent-%COMP%]{right:-20px}}@media (max-width: 576px){.container[_ngcontent-%COMP%]{padding:1rem 10px}.product-title[_ngcontent-%COMP%]{font-size:1.75rem!important}.list-unstyled[_ngcontent-%COMP%]{padding:1rem}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.9rem}}.text-center[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#666;font-weight:300;margin:3rem 0}.carousel-item[_ngcontent-%COMP%]{transition:transform .6s ease-in-out}.gap-3[_ngcontent-%COMP%]{gap:1rem!important}button[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{outline:2px solid #b38449;outline-offset:2px}a.text-decoration-none[_ngcontent-%COMP%]:hover{text-decoration:underline!important}"]})}}return e})()}}]);